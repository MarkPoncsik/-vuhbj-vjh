<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ê–Ω—Ç–∏—É—Ç–æ–ø—ñ—á–Ω—ñ –º—ñ–Ω—ñ-—ñ–≥—Ä–∏</title>
<style>
html, body {
    margin: 0;
    padding: 0;
    height: 100%;
}
body {
    background: linear-gradient(135deg, #000000, #000044, #440077);
    background-size: cover;
    color: #ECECEC;
    font-family: sans-serif;
}
.screen {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.5s ease;
    pointer-events: none;
    padding: 20px;
    box-sizing: border-box;
    text-align: center;
}
.screen.active {
    opacity: 1;
    pointer-events: auto;
}
h1 {
    color: #FFDE59;
    margin-bottom: 20px;
}
button {
    background-color: #9a70f5;
    color: #ECECEC;
    border: 2px solid #9a70f5;
    border-radius: 4px;
    padding: 10px 20px;
    font-size: 1.1em;
    cursor: pointer;
    margin: 5px;
}
button:hover {
    background-color: #FFDE59;
    color: #000;
}
#game1-grid {
    border-collapse: collapse;
    margin: 20px 0;
}
#game1-grid td {
    width: 20px; height: 20px;
    text-align: center;
    vertical-align: middle;
    border: 1px solid #333;
    cursor: pointer;
    font-size: 14px;
    font-weight: bold;
}
#game1-grid td:hover {
    background-color: rgba(255, 222, 89, 0.2);
}
.emoji-grid {
    display: grid;
    gap: 10px;
    justify-items: center;
}
.emoji-grid span {
    font-size: 2rem;
    cursor: pointer;
    transition: transform 0.2s;
}
.emoji-grid span:hover {
    transform: scale(1.2);
}
.message {
    margin-top: 20px;
    font-size: 1.3em;
    color: #FFDE59;
}
</style>
</head>
<body>
<div id="screen-start" class="screen active">
    <h1>–ê–Ω—Ç–∏—É—Ç–æ–ø—ñ—á–Ω—ñ –≤–∏–ø—Ä–æ–±—É–≤–∞–Ω–Ω—è</h1>
    <button id="start-btn">–ü–æ—á–∞—Ç–∏</button>
</div>

<div id="screen-game1" class="screen">
    <div id="game1-grid-container">
        <table id="game1-grid"></table>
    </div>
    <div id="game1-message" class="message" style="display:none;">
        –í–∏ –∑–Ω–∞–π—à–ª–∏ –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–µ —Å–ª–æ–≤–æ.
        <br><button id="game1-next-btn">–ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏</button>
    </div>
</div>

<div id="screen-game2" class="screen">
    <div id="game2-grid-container">
        <div id="game2-emojis" class="emoji-grid" style="grid-template-columns: repeat(4, 1fr);"></div>
    </div>
    <div id="game2-message" class="message" style="display:none;">
        <span id="game2-result-text"></span>
        <br><button id="game2-next-btn">–ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏</button>
    </div>
</div>

<div id="screen-game3" class="screen">
    <div id="game3-grid-container">
        <div id="game3-emojis" class="emoji-grid" style="grid-template-columns: repeat(6, 1fr);"></div>
    </div>
    <div id="game3-message" class="message" style="display:none;">
        –í–∏ –ø–æ–±–∞—á–∏–ª–∏ —Ç–µ, —â–æ —ñ–Ω—à—ñ –Ω–µ –ø–æ–º—ñ—á–∞—é—Ç—å.
        <br><button id="game3-next-btn">–ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏</button>
    </div>
</div>

<div id="screen-final" class="screen">
    <div class="message" id="final-message"></div>
</div>

<script>
let selectedWord = "";

function showScreen(id) {
    document.querySelectorAll('.screen').forEach(s => {
        s.classList.remove('active');
    });
    document.getElementById(id).classList.add('active');
}

document.getElementById('start-btn').addEventListener('click', () => {
    initGame1();
    showScreen('screen-game1');
});

function initGame1() {
    const words = ['—Å–≤–æ–±–æ–¥–∞','–¥—É–º–∞–π','–æ–ø—ñ—Ä'];
    const word = words[Math.floor(Math.random() * words.length)];
    selectedWord = word;
    const gridSize = 20;
    const grid = document.getElementById('game1-grid');
    grid.innerHTML = '';
    // –ü–æ—Ä–æ–∂–Ω—è 2D-–º–∞—Ç—Ä–∏—Ü—è
    const cells = [];
    for(let i=0; i<gridSize; i++){
        cells[i] = [];
        for(let j=0; j<gridSize; j++){
            cells[i][j] = '';
        }
    }
    // –í–∏–±—ñ—Ä –Ω–∞–ø—Ä—è–º–∫—É: –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ –∞–±–æ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ
    const horizontal = Math.random() < 0.5;
    if(horizontal) {
        const row = Math.floor(Math.random() * gridSize);
        const startCol = Math.floor(Math.random() * (gridSize - word.length));
        for(let k=0; k<word.length; k++){
            cells[row][startCol + k] = word[k];
        }
    } else {
        const col = Math.floor(Math.random() * gridSize);
        const startRow = Math.floor(Math.random() * (gridSize - word.length));
        for(let k=0; k<word.length; k++){
            cells[startRow + k][col] = word[k];
        }
    }
    // –ó–∞–ø–æ–≤–Ω–µ–Ω–Ω—è —Å—ñ—Ç–∫–∏ –≤–∏–ø–∞–¥–∫–æ–≤–∏–º–∏ –ª—ñ—Ç–µ—Ä–∞–º–∏
    const letters = '–∞–±–≤–≥“ë–¥–µ—î–∂–∑–∏—ñ—ó–π–∫–ª–º–Ω–æ–ø—Ä—Å—Ç—É—Ñ—Ö—Ü—á—à—â—å—é—è';
    for(let i=0; i<gridSize; i++){
        const row = grid.insertRow();
        for(let j=0; j<gridSize; j++){
            const cell = row.insertCell();
            let char = cells[i][j];
            if(char === '') {
                // –í–∏–ø–∞–¥–∫–æ–≤–∞ –ª—ñ—Ç–µ—Ä–∞
                const rnd = Math.floor(Math.random() * letters.length);
                char = letters[rnd];
            } else {
                // –¶—è –ª—ñ—Ç–µ—Ä–∞ ‚Äì —á–∞—Å—Ç–∏–Ω–∞ –∑–∞–≥–∞–¥–∞–Ω–æ–≥–æ —Å–ª–æ–≤–∞
                cell.classList.add('target');
            }
            cell.textContent = char;
            cell.addEventListener('click', () => {
                if(cell.classList.contains('target')) {
                    document.getElementById('game1-grid-container').style.display = 'none';
                    document.getElementById('game1-message').style.display = 'block';
                }
            });
        }
    }
}

document.getElementById('game1-next-btn').addEventListener('click', () => {
    showScreen('screen-game2');
    initGame2();
});

function initGame2() {
    const container = document.getElementById('game2-emojis');
    container.innerHTML = '';
    document.getElementById('game2-message').style.display = 'none';
    // –í–∏–±—ñ—Ä –µ–º–æ–¥–∑—ñ-–ø–∞—Ä–∏
    const pairTypes = ['üëÅÔ∏è','üîí'];
    const pairEmoji = pairTypes[Math.floor(Math.random() * pairTypes.length)];
    const total = Math.floor(Math.random() * 5) + 16; // –≤—ñ–¥ 16 –¥–æ 20
    const emojis = [];
    emojis.push(pairEmoji);
    emojis.push(pairEmoji);
    // –°–ø–∏—Å–æ–∫ —ñ–Ω—à–∏—Ö –µ–º–æ–¥–∑—ñ (–±–µ–∑ –¥—É–±–ª—é–≤–∞–Ω–Ω—è)
    const pool = ['üòÄ','üòÉ','üòÑ','üòÅ','üòÜ','üòÖ','üòÇ','ü§£','ü•≤','üôÇ','üôÉ','üòâ','üòä','üòá','ü•∞','üòç','ü§©','üòò','üòó','üòô','üòö','üòã','üòõ','üòú','ü§™','üòù','ü§ì','üòé','üßê','üòï','üòü','üôÅ','üòÆ','üòØ','üò≤','üòµ','ü§Ø'];
    // –Ø–∫—â–æ –ø–∞—Ä–∞ –µ–º–æ–¥–∑—ñ —î —É —Å–ø–∏—Å–∫—É, –≤–∏–¥–∞–ª—è—î–º–æ –æ–¥–Ω—É –∫–æ–ø—ñ—é (–Ω–∞ –≤–∏–ø–∞–¥–æ–∫)
    const idx = pool.indexOf(pairEmoji);
    if(idx > -1) pool.splice(idx, 1);
    while(emojis.length < total) {
        const rnd = Math.floor(Math.random() * pool.length);
        const em = pool[rnd];
        if(!emojis.includes(em)) {
            emojis.push(em);
        }
        if(emojis.length >= total) break;
    }
    // –ü–µ—Ä–µ–º—ñ—à—É–≤–∞–Ω–Ω—è –µ–º–æ–¥–∑—ñ
    for(let i=emojis.length-1; i>0; i--){
        const j = Math.floor(Math.random() * (i+1));
        [emojis[i], emojis[j]] = [emojis[j], emojis[i]];
    }
    let firstSelected = null;
    emojis.forEach(emoji => {
        const span = document.createElement('span');
        span.textContent = emoji;
        container.appendChild(span);
        span.addEventListener('click', () => {
            if(document.getElementById('game2-message').style.display === 'block') return;
            if(firstSelected === null) {
                firstSelected = emoji;
                span.style.border = '2px solid #FFDE59';
                span.style.borderRadius = '5px';
            } else {
                // –î—Ä—É–≥–∏–π –∫–ª—ñ–∫
                if(emoji === firstSelected) {
                    document.getElementById('game2-result-text').textContent = '–í–∏ –¥–æ–≤–µ–ª–∏ —É–≤–∞–∂–Ω—ñ—Å—Ç—å.';
                } else {
                    document.getElementById('game2-result-text').textContent = '–ù–µ–≤—ñ—Ä–Ω–æ, —Ä–µ–∂–∏–º –ø–∏–ª—å–Ω—É—î.';
                }
                document.getElementById('game2-message').style.display = 'block';
            }
        });
    });
}

document.getElementById('game2-next-btn').addEventListener('click', () => {
    showScreen('screen-game3');
    initGame3();
});

function initGame3() {
    const container = document.getElementById('game3-emojis');
    container.innerHTML = '';
    document.getElementById('game3-message').style.display = 'none';
    const total = 30;
    const happyIndex = Math.floor(Math.random() * total);
    for(let i=0; i<total; i++){
        const span = document.createElement('span');
        span.textContent = (i === happyIndex) ? 'üòä' : 'üòê';
        container.appendChild(span);
        if(i === happyIndex) {
            span.addEventListener('click', () => {
                document.getElementById('game3-message').style.display = 'block';
            });
        }
    }
}

document.getElementById('game3-next-btn').addEventListener('click', () => {
    showScreen('screen-final');
    let message = '';
    if(selectedWord === '—Å–≤–æ–±–æ–¥–∞') {
        message = '–¢–≤–æ—è –∂–∞–≥–∞ –¥–æ —Å–≤–æ–±–æ–¥–∏ –≤—Ä–∞–∂–∞—î. –í—ñ—Ç–∞—î–º–æ –∑ –ø—Ä–æ—Ö–æ–¥–∂–µ–Ω–Ω—è–º –≤–∏–ø—Ä–æ–±—É–≤–∞–Ω—å.';
    } else if(selectedWord === '–¥—É–º–∞–π') {
        message = '–¢–≤–æ—î –ø—Ä–∞–≥–Ω–µ–Ω–Ω—è –¥—É–º–∞—Ç–∏ –Ω–µ–±–µ–∑–ø–µ—á–Ω–µ –¥–ª—è —Å–∏—Å—Ç–µ–º–∏. –ê–ª–µ —Å–∞–º–µ –≤ —Ü—å–æ–º—É —Å–∏–ª–∞. –í—ñ—Ç–∞—î–º–æ –∑ –ø—Ä–æ—Ö–æ–¥–∂–µ–Ω–Ω—è–º –≤–∏–ø—Ä–æ–±—É–≤–∞–Ω—å.';
    } else if(selectedWord === '–æ–ø—ñ—Ä') {
        message = '–¢–≤–æ—è –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å –¥–æ –æ–ø–æ—Ä—É —Ä–æ–±–∏—Ç—å —Ç–µ–±–µ –≤–æ—Ä–æ–≥–æ–º —Å–∏—Å—Ç–µ–º–∏ ‚Äî —ñ –Ω–∞–¥—ñ—î—é –¥–ª—è —ñ–Ω—à–∏—Ö. –í—ñ—Ç–∞—î–º–æ –∑ –ø—Ä–æ—Ö–æ–¥–∂–µ–Ω–Ω—è–º –≤–∏–ø—Ä–æ–±—É–≤–∞–Ω—å.';
    }
    document.getElementById('final-message').textContent = message;
});
</script>
</body>
</html>
